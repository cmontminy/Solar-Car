http://os.mbed.com/users/screamer/code/mbed/#aff670d0d510
